<ul id="carList"></ul>

<script type="text/javascript">
  var carList = document.getElementById("carList");
                                        
  function addCar(name, configNumber) {    
    const item = document.createElement("li");
    item.innerHtml = `${name}`;
    if(configNumber != null) item.innerHtml += configNumber;
    // console.log(`${name} ${configNumber}`);
    // checkboxes for each type
    carList.appendChild(item);
  }
  
  function getConfigNumber(name) {
    
    if(name.indexOf("config") != 0) return null;
    return name.replace("config", "").replace(".txt", "");
  }
  
  async function listFiles() {
      const dirHandle = await window.showDirectoryPicker();
      for await (const entry of dirHandle.values()) {
        if(entry.kind == "directory") {
          var configCount = 0;
          var subDir = await dirHandle.getDirectoryHandle(entry.name);
          for await (const subEntry of subDir.values()) {
            var configNumber = getConfigNumber(subEntry.name);
            addCar(entry.name, configNumber);
            // if(subEntry.name.indexOf("config" == 0)) configCount++;
          }
          // addCar(entry.name, configCount);
        }
      // console.log(entry.kind, entry.name);
      }
  }

  listFiles();
</script>
